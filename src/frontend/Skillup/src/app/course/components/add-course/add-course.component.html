<h1>Categories</h1>
<!-- @for(category of categories(); track category.id){
<h3 class="text-2xl">{{ category.name }}</h3>
@for (subcategory of category.subcategories; track subcategory.id) {
<p>{{ subcategory.name }}</p>
} } 
 -->
 @if(categories.length == 0){
    <p>loading</p>
}

<div class="w-3/5">
    <form [formGroup]="form" (ngSubmit)="onSubmit()">
    <p-stepper [value]="1" class="basis-[50rem]" [linear]="true">
        <p-step-list>
            <p-step [value]="1">Header I</p-step>
            <p-step [value]="2">Header II</p-step>
            <p-step [value]="3">Header II</p-step>
        </p-step-list>
        <p-step-panels>
            <p-step-panel [value]="1">
                <ng-template #content let-activateCallback="activateCallback">
                    <div class="flex flex-col h-48">
                        <div
                            class="border-2 border-dashed border-surface-200 dark:border-surface-700 rounded bg-surface-50 dark:bg-surface-950 flex-auto flex justify-center items-center font-medium"
                        >
                        <div>
                            <label class="text-slate-900">Enter Course Title</label>
                            <input id="title" type="text" pInputText formControlName="title"/>
                        </div>
                        </div>
                        <div class="flex pt-6 justify-end">
                            <p-button label="Next" icon="pi pi-arrow-right" iconPos="right" (onClick)="activateCallback(2)" 
                            [disabled]="form.get('title')?.invalid || form.get('title')?.pristine"/>
                        </div>
                    </div>
                </ng-template>
            </p-step-panel>
    
            <p-step-panel [value]="2">
                <ng-template #content let-activateCallback="activateCallback">
                    <div class="flex flex-col h-48">
                        <div
                            class="border-2 border-dashed border-surface-200 dark:border-surface-700 rounded bg-surface-50 dark:bg-surface-950 flex-auto flex justify-center items-center font-medium"
                        >
                        <p-select [options]="categoryNames()" optionLabel="name" optionValue="id" placeholder="Select a Category" class="w-full md:w-56" formControlName="category" [(ngModel)]="selectedCategory"/>
                        </div>
                    </div>
                    <div class="flex pt-6 justify-between">
                        <p-button label="Back" severity="secondary" icon="pi pi-arrow-left" (onClick)="activateCallback(1)" />
                        <p-button label="Next" icon="pi pi-arrow-right" iconPos="right" (onClick)="activateCallback(3)" 
                        [disabled]="form.get('category')?.invalid || form.get('category')?.pristine"/>
                    </div>
                </ng-template>
            </p-step-panel>
    
            <p-step-panel [value]="3">
                <ng-template #content let-activateCallback="activateCallback">
                    <div class="flex flex-col h-48">
                        <div
                            class="border-2 border-dashed border-surface-200 dark:border-surface-700 rounded bg-surface-50 dark:bg-surface-950 flex-auto flex justify-center items-center font-medium"
                        >
                        <p-select [options]="subcategoryNames()" optionLabel="name" optionValue="id" placeholder="Select a Category" class="w-full md:w-56" formControlName="subcategory"/>

                        </div>
                    </div>
                    <div class="flex pt-6 justify-between">
                        <p-button label="Back" icon="pi pi-arrow-left" iconPos="right" (onClick)="activateCallback(2)" />
                        <p-button label="Submit" icon="pi pi-arrow-right" iconPos="right" type="Submit" 
                        [disabled]="form.get('subcategory')?.invalid || form.get('subcategory')?.pristine"/>
                    </div>
                </ng-template>
            </p-step-panel>
        </p-step-panels>
    </p-stepper>
    </form>
<div>
