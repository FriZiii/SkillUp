<div class="flex flex-col justify-center">
  <div class="prose">
    <h2 class="my-1 font-semibold text-xl">Add New Attachment</h2>
  </div>

  @if(attachments.length !== 0){
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Extension</th>
        <th></th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      @for(attachment of attachments; track attachment.id){
      <tr>
        <td>{{ attachment.name }}</td>
        <td>{{ attachment.type }}</td>
        <td>
          <div class="cursor-pointer" (click)="downloadAttachment(attachment)">
            <i class="pi pi-download" style="font-size: 1rem"></i>
          </div>
        </td>
        <td>
          <div class="cursor-pointer" (click)="deleteAttachment(attachment.id)">
            <i class="pi pi-trash" style="font-size: 1rem"></i>
          </div>
        </td>
      </tr>
      }
    </tbody>
  </table>
  }

  <!-- File Upload -->

  <div class="grid grid-cols-2 mt-4" [style]="{ width: '400px' }">
    <p-button
      (onClick)="upload()"
      [disabled]="!selectedFile"
      [style]="{ width: '100%', borderRadius: '0.5rem 0  0 0.5rem' }"
      label="Upload"
    ></p-button>

    @if(selectedFile){
    <p-button
      (onClick)="cancel()"
      severity="secondary"
      [style]="{ width: '100%', borderRadius: '0 0.5rem 0.5rem 0' }"
      label="Cancel"
    ></p-button>
    } @else {
    <p-fileupload
      #fu
      mode="basic"
      [style]="{ width: '100%', borderRadius: '0 0.5rem 0.5rem 0' }"
      chooseLabel="Choose"
      chooseIcon="pi pi-upload"
      (onSelect)="onSelectImage($event)"
    />
    }
  </div>
</div>
