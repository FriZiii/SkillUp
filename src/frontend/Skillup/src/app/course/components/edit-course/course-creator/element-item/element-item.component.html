<div class="su-border-y p-2 ml-14 my-2 bg-white element-item w-full">
  <div class="flex w-full items-start">
    <i
      [class]="definedIcon(element().type)"
      style="font-size: 1rem"
      [ngClass]="{ 'mt-1': !editing, 'mt-3': editing }"
    ></i>
    @if(!editing){
    <div class="w-full px-4 prose">
      <h4 class="b-0">{{ element().title }}</h4>
      <p>{{ element().description }}</p>
    </div>
    } @else{
    <div class="w-full px-4">
      <input pInputText class="w-full mb-2" [(ngModel)]="elementTitle" />
      <textarea
        class="custom-textarea w-full"
        rows="2"
        [(ngModel)]="elementDescription"
      ></textarea>
    </div>
    }

    <!-- Button Container -->
    <div
      class="flex justify-end w-full gap-2 px-2 button-container"
      [ngClass]="{ hidden: editing }"
    >
      <p-menu #menu [model]="items" [popup]="true" />
      <p-button
        (click)="menu.toggle($event)"
        icon="pi pi-ellipsis-h"
        severity="secondary"
      />
      <p-button
        icon="pi pi-trash"
        severity="danger"
        (onClick)="removeElement($event)"
      ></p-button>
    </div>
    <div class="flex justify-end gap-2 px-2" [ngClass]="{ hidden: !editing }">
      <p-button
        icon="pi pi-save"
        severity="success"
        (onClick)="saveElement()"
      ></p-button>
      <p-button
        icon="pi pi-times"
        severity="secondary"
        (onClick)="changeEditVisibility()"
      ></p-button>
    </div>
  </div>
</div>

<p-dialog
  header="Element's Content"
  [modal]="true"
  [(visible)]="contentDialogVisible"
  [style]="{ width: '70rem' }"
>
  @if(this.element().hasAsset === false) {
  <div class="prose">
    <h2>You haven't added content to this element yet!</h2>
  </div>
  <div class="grid grid-cols-2">
    <p-button
      (onClick)="upload()"
      [disabled]="!selectedFile"
      [style]="{ width: '100%', borderRadius: '0.5rem 0  0 0.5rem' }"
      label="Upload"
    ></p-button>

    @if(selectedFile){
    <p-button
      (onClick)="cancel()"
      severity="secondary"
      [style]="{ width: '100%', borderRadius: '0 0.5rem 0.5rem 0' }"
      label="Cancel"
    ></p-button>
    } @else {
    <p-fileupload
      #fu
      mode="basic"
      [style]="{ width: '100%', borderRadius: '0 0.5rem 0.5rem 0' }"
      chooseLabel="Choose"
      chooseIcon="pi pi-upload"
      (onSelect)="onSelectImage($event)"
    />
    <!-- accept="image/*" -->
    }
  </div>
  } @else{
  <div class="prose"><h2>Tw√≥j Asset</h2></div>
  @if(this.element().type === AssetType.Video ){ @if(fileLink()){
  <video width="320" height="240" controls>
    <source [src]="fileLink()" type="video/mp4" />
    Your browser does not support the video tag.
  </video>
  } } @if(this.element().type === AssetType.Article ){ @if(fileLink()){
  <!--  <ngx-extended-pdf-viewer
    src="https://www.orimi.com/pdf-test.pdf"
    [textLayer]="true"
    [height]="'1000px'"
    [textLayer]="true"
    [showHandToolButton]="true"
    [filenameForDownload]="'Public Domain.pdf'"
  >
    optional - define the filename if the user downloads the PDF
  </ngx-extended-pdf-viewer> -->

  <object data="fileLink()" type="application/pdf" width="100%" height="100%">
    <p>
      Your browser does not support PDFs.
      <a href="https://example.com/test.pdf">Download the PDF</a>
      .
    </p>
  </object>
  } } }

  <div class="flex justify-end gap-2">
    <p-button
      label="Cancel"
      severity="secondary"
      (click)="contentDialogVisible = false"
    />
    <p-button label="Save" (click)="contentDialogVisible = false" />
  </div>
</p-dialog>
