<div class="prose mb-8">
  <h1>Edit your course content!</h1>
</div>
<p-accordion [value]="0" cdkDropList (cdkDropListDropped)="dropSection($event)">
  @for (section of sections(); track section.id) {
  <p-accordion-panel [value]="section.id">
    <p-accordion-header
      cdkDrag
      [cdkDragDisabled]="sectionEdit"
      class="!bg-white"
    >
      <app-section-item
        [section]="section"
        (onEditChange)="changeSectionEditMode($event)"
        class="w-full"
      ></app-section-item>
      <div *cdkDragPlaceholder class="h-12 w-full bg-neutral-200"></div>
    </p-accordion-header>
    <p-accordion-content>
      <div
        cdkDropList
        [cdkDropListData]="section"
        (cdkDropListDropped)="dropElement($event)"
      >
        @for (element of section.elements; track element.id) {
        <app-element-item
          [element]="element"
          [section]="section"
          (onEditChange)="changeElementEditMode($event)"
          cdkDrag
          [cdkDragData]="element"
          [cdkDragDisabled]="elementEdit"
        ></app-element-item>
        }
      </div>
      <app-add-new-element></app-add-new-element>
    </p-accordion-content>
  </p-accordion-panel>
  }
</p-accordion>

<div class="my-4">
  <app-hidden-form-wrapper btnText="Add Section" (submit)="submitSection()">
    <div class="mt-5"></div>
    <p-floatlabel>
      <input
        id="newSectionTitle"
        pInputText
        class="w-full"
        [(ngModel)]="newSectionTitle"
      />
      <label for="newSectionTitle">Title</label>
    </p-floatlabel>
  </app-hidden-form-wrapper>
</div>
